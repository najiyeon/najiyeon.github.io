---
# multilingual page pair id, this must pair with translations of this page. (This name must be unique)
lng_pair: id_SP_final2
title: "System Programming Ch9 - Ch10"

# post specific
# if not specified, .name will be used from _data/owner/[language].yml
author: Jiyeon Na
# multiple category is not supported
category: System Programming
# multiple tag entries are possible
tags: [SP, FINAL]
# thumbnail image for post
img: ":sp/post_pic_sp_final2_1.png"
# disable comments on this page
#comments_disable: true

# publish date
date: 2022-12-09 16:00:00 +0900

# seo
# if not specified, date will be used.
#meta_modify_date: 2022-01-01 10:04:30 +0900
# check the meta_common_description in _data/owner/[language].yml
#meta_description: ""

# optional
# please use the "image_viewer_on" below to enable image viewer for individual pages or posts (_posts/ or [language]/_posts folders).
# image viewer can be enabled or disabled for all posts using the "image_viewer_posts: true" setting in _data/conf/main.yml.
#image_viewer_on: true
# please use the "image_lazy_loader_on" below to enable image lazy loader for individual pages or posts (_posts/ or [language]/_posts folders).
# image lazy loader can be enabled or disabled for all posts using the "image_lazy_loader_posts: true" setting in _data/conf/main.yml.
#image_lazy_loader_on: true
# exclude from on site search
#on_site_search_exclude: true
# exclude from search engines
#search_engine_exclude: true
# to disable this page, simply set published: false or delete this file
#published: false
---

# ğŸ’¡Â Chap_9

## Sessions

ì‹œìŠ¤í…œí”„ë¡œê·¸ë˜ë°ì—ì„œì˜ ***session***ì€?

â†’ í•˜ë‚˜ ë˜ëŠ” ê·¸ ì´ìƒì˜ í”„ë¡œì„¸ìŠ¤ ê·¸ë£¹

<br>

## Controlling Terminal

![controlling terminal](:sp/post_pic_sp_final2_1.png){:width="700px"}



- ***session leader*** : ë‹¤ë¥¸ë§ë¡œ ***login shell ë˜ëŠ” controlling process***
    - ì–´ë–¤ ì„œë²„ì— ì ‘ì†í•˜ì—¬ ì—°ê²°ì„±ì„ ê°€ì§€ê²Œ ë¨ â†’ ***session***
    - terminalì„ í†µí•´ì„œ ëª…ë ¹ì–´ë¥¼ ì¹˜ê³ , ì½”ë”©ì„ í•  ìˆ˜ ìˆê²Œ ë¨ (login shellì„ í†µí•´ì„œ)
        
        â†’ login shellì´ sessionì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ë©´ì„œë„, session leaderê°€ ë˜ëŠ” ê²ƒ
        
    - ì ‘ì†í•œ í„°ë¯¸ë„ì„ í†µí•´ process 1ë¶€í„° 5ê¹Œì§€ë¥¼ ë‹¤ ë‹¤ë£° ìˆ˜ ìˆê²Œë¨(í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ì–´ë‚¼ìˆ˜ë„, ì§€ìš¸ìˆ˜ë„, ë©ˆì¶œìˆ˜ë„,.. ê¶Œí•œì´ ìˆë‹¤ë©´)

- ***controlling terminal*** : pts ë˜ëŠ” ttyë¼ê³  í•¨, ì¦‰ ì ‘ì†í–ˆì„ ë•Œ ë¶€ì—¬ë°›ëŠ” ì´ shellì„ ì œì–´í•˜ëŠ” ì„œë²„ì—ì„œ ë¶€ì—¬í•œ ì–´ë–¤ê°’
    - controlling terminalì—ì„œ hang-up signalì„ ì£¼ë©´ session leaderë¡œ ê°€ê³ ,
    - terminal input and terminal-generated signalsë¥¼ ì£¼ë©´ foreground process groupìœ¼ë¡œ ê°

- ***hang-up signal*** : ì‚¬ìš©ìê°€ ì ê¹ ë©ˆì¶”ë¼ê³  ì£¼ëŠ” ëª…ë ¹ì–´, session leaderê°€ ë°˜ì‘í•˜ê²Œ ë¨
- ***terminal input and terminal-generated signals*** : ì¸í„°ëŸ½íŠ¸

- ***foreground ì™€ backgroundì˜ ì°¨ì´***
    - background : &ì„ ë¶™ì´ë©´ ë°±ê·¸ë¼ìš´ë“œë¡œ ë™ì‘, í„°ë¯¸ë„ì„ í‘œí˜„í•´ì£¼ì§€ ì•Šê³  ì•Œì•„ì„œ ëŒë¦¼, shellì˜ ê¶Œí•œì„ ë‚´ì–´ì£¼ì§€ ì•Šìœ¼ë©´ì„œ ë™ì‘, í”„ë¡œì„¸ìŠ¤ë¥¼ ëŒë ¤ë†“ê³  ë‹¤ë¥¸ì¼ì„ í•  ìˆ˜ ìˆìŒ
    - foreground : &ì„ ë¶™ì´ì§€ ì•Šìœ¼ë©´ í¬ê·¸ë¼ìš´ë“œë¡œ ë™ì‘, ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤Œ, shellì˜ ê¶Œí•œì„ ëºê¹€, í¬ê·¸ë¼ìš´ë“œë¡œ ë„ëŠ” í”„ë¡œì„¸ìŠ¤ëŠ” ëë‚ ë•Œê¹Œì§€ ë‹¤ë¥¸ ì¼ì„ í•  ìˆ˜ ì—†ìŒ

<br>

# ğŸ’¡Â Chap_10

## Interrupted System Calls

 ***Automatic restarting***

- nioctl, read, readv, write, writev, wait, and waitpid â€¦ ì´ëŸ° í•¨ìˆ˜ë“¤ì€ ì•„ì£¼ ëŠë¦° ìŠ¬ë¡œìš°ì‹œìŠ¤í…œì½œ í•¨ìˆ˜ë“¤ì´ë‹¤. (slowsc)
- ê·¸ëŸ°ë° ì–˜ë„¤ê°€ ëª¨ì¢…ì˜ ì´ìœ ë¡œ ë©ˆì¶”ì—ˆì„ ë•Œ ì˜ì›íˆ ë¸”ë¡ë  ìˆ˜ ìˆìŒ, ê·¸ëŸ¬ë©´ í”„ë¡œê·¸ë¨ì„ ê·¸ëƒ¥ êº¼ì•¼ë¨, ê·¼ë° ê·¸ëƒ¥ ëŒìˆ˜ëŠ” ì—†ê³  ë³µêµ¬ë¥¼ í•´ì•¼ë¨
- ì´ ë³µêµ¬ë¥¼ ìë™ì ìœ¼ë¡œ í•´ì£¼ëŠ”ê²Œ ***automatic restarting***
- ìŠ¬ë¡œìš°ì‹œìŠ¤í…œì½œ í•¨ìˆ˜ì—ì„œ ì¸í„°ëŸ½íŠ¸ ë°œìƒí–ˆì„ë•Œ, ë¬´í•œë¸”ë¡ì„ í•´ì†Œí•˜ê¸° ìœ„í•´ ìë™ìœ¼ë¡œ ì¬ì‹¤í–‰ í•´ì£¼ëŠ” ê²ƒ.

<br>

## *kill* and *raise* Fuction

- ***kill*** : í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì´ëŠ”(ì—†ì• ëŠ”, ì œê±°í•˜ëŠ”, ì§€ìš°ëŠ”) í•¨ìˆ˜
- ***raise*** : ë‚˜ ìì‹  í”„ë¡œì„¸ìŠ¤ì—ê²Œ ì‹œê·¸ë„ì„ ë„˜ê²¨ì£¼ëŠ” í•¨ìˆ˜

```c
#include <signal.h>
int kill(pid_t pid, int signo)
int raise(int signo);
```

- kill í•˜ë©´ ì–´ë–¤ í”„ë¡œì„¸ìŠ¤ë¥¼ ì£½ì¼ì§€ pid(process number)ë¥¼ ë„˜ê²¨ì£¼ê²Œ ë˜ì–´ìˆìŒ, ê·¼ë° raiseëŠ” í”„ë¡œì„¸ìŠ¤ ì•„ì´ë””ë¥¼ ë„˜ê²¨ì£¼ì§€ ì•ŠìŒ, ê·¸ ì´ìœ ëŠ” ë‚˜ ìì‹ ì—ê²Œ ë³´ë‚´ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì„

<br>

## *alarm* and *pause* Function (ì‹œí—˜ë¬¸ì œ ë‚˜ì˜¬ê±°ì„)

 (ì•„ë˜ ì½”ë“œëŠ” ëª¨ë“  ë¼ì¸ ë‹¤ ì´í•´í•´ì•¼ë¨)

```c
#includeÂ  <signal.h>
#includeÂ  <unistd.h>

static void
sig_alrm(int signo)
{
Â  /* nothing to do, just return to wake up the pause */
}

unsigned int
sleep1(unsigned int nsecs)
{
Â  if (signal(SIGALRM, sig_alrm) == SIG_ERR) //SIGALARMì´ ë°œìƒí•˜ë©´ ë‘ë²ˆì§¸ ì¸ì, sig_alrmì„ ì‹¤í–‰ì‹œì¼œì£¼ë¼ëŠ” ì˜ë¯¸
Â  return(nsecs);
Â  alarm(nsecs);Â  /* start the timer */
Â  pause();Â  /* next caught signal wakes us up */
Â  return(alarm(0));Â  /* turn off timer, return unslept time */
}
```

**\<ì´ ì½”ë“œê°€ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•  ê²½ìš°\>**

- `signal(SIGALRM, sig_alrm)` ì€ ***SIGALARM***(ì‹¤ì œë¡œ ì‹œìŠ¤í…œì´ ë‚´ë±‰ì€ ì‹œê·¸ë„)ì´ ë°œìƒí•˜ë©´ ë‘ë²ˆì§¸ ì¸ì, ***sig_alrm***ì„ ì‹¤í–‰ì‹œì¼œì£¼ë¼ëŠ” ì˜ë¯¸
- ê·¼ë° ì‹¤í–‰ì´ ì•ˆë˜ê³  ì—ëŸ¬ê°€ ë‚˜ë©´ ë¦¬í„´í•¨
- ***alarm*** : SIGALRMì„ ë§Œë“¤ì–´ì¤Œ, ì¸ìì¸ nsecsëŠ” ì§„ì§œ ì´ˆ, ì¸ìë¡œ ë„˜ì–´ì˜¨ ìˆ˜ê°€ 2ë©´ 2ì´ˆë’¤ì— ì•ŒëŒ í•¨ìˆ˜ ìˆ˜í–‰, ì‹œê·¸ë„ ë°œìƒ, 2ì´ˆê°€ ë˜ê¸° ì „ì—ëŠ” ê³„ì† ë‹¤ìŒë¼ì¸ ì‹¤í–‰í•´ê°
    
    alarmì€ ì¸ìë¡œ ë“¤ì–´ì˜¨ ì´ˆ ì‹œê°„ ì´í›„ì— SIGALARMì„ ë°œìƒì‹œí‚¤ëŠ” í•¨ìˆ˜
    
- ***pause*** : ì‹œê·¸ë„ì´ ë­ë“ ê°„ì— ì‹œê·¸ë„ì´ ë°œìƒí•  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ë¼ëŠ” í•¨ìˆ˜, 2ì´ˆê°€ ë  ë•Œê¹Œì§€ pauseì—ì„œ ê¸°ë‹¤ë¦¬ë‹¤ê°€ signalí•¨ìˆ˜ ë™ì‘í•´ì„œ sig_alrm í˜¸ì¶œí•´ì„œ ìˆ˜í–‰, ê·¸ëŸ¬ê³  ë‹¤ì‹œ ëŒì•„ì˜´
    - ê·¸ ë’¤ë¡œëŠ” alarmê³¼ pauseëŠ” í•œë²ˆ ìˆ˜í–‰ë˜ì—ˆìœ¼ë¯€ë¡œ ê·¸ëƒ¥ ì§€ë‚˜ê° (alarm 0ë¨, ë”ì´ìƒ ë™ì‘í•˜ì§€ ì•ŠìŒ)

**\<race condition\>**

`alarm(nsecs);` ì—ì„œ race condition ë°œìƒ

- schedulingì´ ê¼¬ì—¬ì„œ pauseë¥¼ ë§Œë‚˜ê¸° ì „ì— ì•ŒëŒì´ ëë‚  ê²½ìš°,
- ë¬´í•œ ë¸”ë¡ì— ê±¸ë ¤ì„œ pauseì— ì¡í˜€ìˆê²Œë¨
- ê·¸ë˜ì„œ ì´ê±´ ë§ì€ ì–‘ì„ ì²˜ë¦¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì—ì„œëŠ” ì´ë ‡ë“¯ ë¸”ë¡ì´ ë°œìƒí•´ì„œ ì“¸ ìˆ˜ ì—†ìŒ

<br>

ìœ„ì™€ ê°™ì€ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì½”ë“œ

```c
#includeÂ  <setjmp.h>
#includeÂ  <signal.h>
#includeÂ  <unistd.h>

static jmp_bufÂ  env_alrm;

static void
sig_alrm(int signo)
{
Â  longjmp(env_alrm, 1);
}

unsigned int
sleep2(unsigned int nsecs)
{
Â  if (signal(SIGALRM, sig_alrm) == SIG_ERR)
Â  return(nsecs);
Â  if (setjmp(env_alrm) == 0) { //ì•ŒëŒì„ setjmpì•ˆì—ë‹¤ê°€ ë„£ì–´ì¤Œ
Â  alarm(nsecs);Â  /* start the timer */
Â  pause();Â  /* next caught signal wakes us up */
Â  }
Â  return(alarm(0));Â  /* turn off timer, return unslept time */
}
```

- setjmpë¥¼ ê±¸ê³  ì•ŒëŒì´ ëŒê²Œë¨
- ê·¸ëŸ¬ë©´ sig_alrmì´ ì‹¤í–‰ë˜ì—ˆì„ ë•Œ longjmpë§Œë‚˜ê³ , 1ì„ ë°˜í™˜í•˜ê²Œ ë˜ë‹ˆê¹Œ ifë¬¸ì— ì•ˆê±¸ë¦¼, ì¦‰ ë¬¸ì œ í•´ê²°
- ì•ŒëŒì„ í†µí•´ì„œ ë°œìƒí•˜ëŠ” raceconditionì€ ì´ë ‡ê²Œ setjmpì™€ longjmpë¡œ í•´ì†Œ ê°€ëŠ¥

<br>

(ì•„ë˜ ì½”ë“œëŠ” ìœ„ì˜ alarmê³¼ pauseì—ì„œ ë°œìƒí•˜ëŠ” race conditionê³¼ ë™ì¼í•¨)

```c
static voidÂ  sig_alrm(int);

int main(void)
{
Â  intÂ  n;
Â  charÂ  line[MAXLINE];

Â  if (signal(SIGALRM, sig_alrm) == SIG_ERR)
Â  err_sys("signal(SIGALRM) error");

Â  alarm(10);
Â  if ((n = read(STDIN_FILENO, line, MAXLINE)) < 0)
Â  err_sys("read error");
Â  alarm(0);

Â  write(STDOUT_FILENO, line, n);
Â  exit(0);
}

static void sig_alrm(int signo)
{
Â  /* nothing to do, just return to interrupt the read */
}
```

**\<race condition ë°œìƒ\>**

- `alarm(10);` ê±¸ë¦¬ê³  10ì´ˆë™ì•ˆ ë’¤ì˜ ì½”ë“œê°€ ì‹¤í–‰ë˜ê¸¸ ê¸°ëŒ€í•¨, ê·¸ëŸ°ë° ì„œë²„ì—ì„œ ì²˜ë¦¬í•´ì•¼ë  ì¼ì´ ë„ˆë¬´ ë§ì„ ê²½ìš°(ì»´í“¨í„°ê°€ ê°œêµ¬ë¦¬ë‹¤ëŠ” ê°€ì •), readë¥¼ ìˆ˜í–‰ ëª»í•˜ê³  ì•ŒëŒì´ ëë‚˜ë²„ë¦¬ëŠ” ê²½ìš°
- readë¥¼ ë§Œë‚˜ê¸°ë„ ì „ì— ì¸í„°ëŸ½íŠ¸ê°€ ê±¸ë ¸ë‹¤ ì™”ë”ë‹ˆ ìˆ˜í–‰ì´ ì•ˆë˜ê³  ë¬´í•œëŒ€ê¸°ë¥¼ í•´ë²„ë¦¼, ë¬´í•œë¸”ë¡(readì˜ íŠ¹ì„±)
- readëŠ” ì‚¬ìš©ìì˜ í‚¤ë³´ë“œ ì…ë ¥ì„ ë°›ì„ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒ, ê·¸ëŸ°ë° ì•ŒëŒì„ ê°”ë‹¤ê°€ ì¸í„°ëŸ½íŠ¸ê°€ ê±¸ë¦¬ë©´ readí•¨ìˆ˜ëŠ” ë”ì´ìƒ ë™ì‘ X, ê³„ì† ê¸°ë‹¤ë¦¼(ë¸”ë¡ ìƒíƒœ)
- readê°€ ë¸”ë¡ì¸ ìƒíƒœë¥¼ êº¼ë‚´ì£¼ê±°ë‚˜ readë¥¼ í•œë²ˆ ë” ìˆ˜í–‰í•´ì¤˜ì•¼í•¨

<br>

ìœ„ì˜ ìƒí™©ì„ longjmp, setjmpë¡œ í•´ê²°í•œ ì½”ë“œ

```c
static voidÂ  sig_alrm(int);
static jmp_bufÂ  env_alrm;

int main(void)
{
Â  intÂ  n;
Â  charÂ  line[MAXLINE];

Â  if (signal(SIGALRM, sig_alrm) == SIG_ERR)
Â  err_sys("signal(SIGALRM) error");
Â  if (setjmp(env_alrm) != 0)
Â  err_quit("read timeout");

Â  alarm(10);
Â  if ((n = read(STDIN_FILENO, line, MAXLINE)) < 0)
Â  err_sys("read error");
Â  alarm(0);

Â  write(STDOUT_FILENO, line, n);
Â  exit(0);
}

static void sig_alrm(int signo)
{
Â  longjmp(env_alrm, 1);
}
```

- alarm ì„¸íŒ…ì€ ë˜‘ê°™ì€ë° setjmpë¥¼ ê±¸ì–´ì¤Œ
- alarm ëë‚˜ë©´ sig_alrm ì‹¤í–‰, setjmpë¡œ ì í”„í•˜ëŠ”ë° ë°˜í™˜ê°’ 1,
- ê·¸ëŸ¬ë©´ ifë¬¸ì— ê±¸ë ¤ì„œ `err_quit("read timeout");` ë°œìƒ

<br>

## *sigpending* Function (ì½”ë“œ ì•”ê¸°)


```c
static void sig_quit(int signo) //ì´í•¨ìˆ˜ë¥¼ ì´í•´í•  í•„ìš”ëŠ” X
{
Â Â  printf("caught SIGQUIT\n");
Â Â  if (signal(SIGQUIT, SIG_DFL) == SIG_ERR)
Â  err_sys("can't reset SIGQUIT");
}
```

```c
int main(void)
{
Â  sigset_tÂ  newmask, oldmask, pendmask;

Â  if (signal(SIGQUIT, sig_quit) == SIG_ERR) //SIGQUITê°€ ë°œìƒí•˜ë©´ sig_quitì‹¤í–‰
	Â  err_sys("can't catch SIGQUIT");

Â  /*
Â  Â * Block SIGQUIT and save current signal mask.
Â  Â */
Â  sigemptyset(&newmask);
Â  sigaddset(&newmask, SIGQUIT);
Â  if (sigprocmask(SIG_BLOCK, &newmask, &oldmask) < 0)
	Â  err_sys("SIG_BLOCK error");

Â  sleep(5);Â  /* SIGQUIT here will remain pending */

Â  if (sigpending(&pendmask) < 0)
	Â  err_sys("sigpending error");
Â  if (sigismember(&pendmask, SIGQUIT))
	Â  printf("\nSIGQUIT pending\n");

Â  /*
Â  Â * Reset signal mask which unblocks SIGQUIT.
Â  Â */
Â  if (sigprocmask(SIG_SETMASK, &oldmask, NULL) < 0)
	Â  err_sys("SIG_SETMASK error");
Â  printf("SIGQUIT unblocked\n");

Â  sleep(5);Â  /* SIGQUIT here will terminate with core file */
Â  exit(0);
}
```

- `sigset_tÂ  newmask, oldmask, pendmask;` : sigset_tëŠ” ìë£Œí˜•ì¸ë° ì‹œê·¸ë„ì„ ì €ì¥í•˜ê¸° ìœ„í•œ ë°”êµ¬ë‹ˆì„ (setë‹ˆê¹Œ),
    
    ì‹œê·¸ë„ì˜ ì¢…ë¥˜ëŠ” êµ‰ì¥íˆ ë§ìŒ ê·¸ê²ƒë“¤ì„ ë‹´ì„ ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì–´ì§„ ìë£Œí˜•ì„
    
- ***SIGQUIT*** : control + \ (ë©ˆì¶”ëŠ” ê²ƒ)
- `sigemptyset(&newmask);` :
    - `char arr[100] = {0,}` ì´ëŸ° ì—­í• 
    - newmaskë¥¼ ì‹¹ ì´ˆê¸°í™” í•´ì¤Œ, ì•„ë¬´ê²ƒë„ ë‹´ì§€ ì•Šì€ ë°”êµ¬ë‹ˆë¡œ ë§Œë“¤ì–´ì¤Œ
    - ì¸ìë¡œ ë“¤ì–´ì˜¨ ì• ë¥¼ ì•„ë¬´ê²ƒë„ ë‹´ì§€ ì•Šì€ ê±¸ë¡œ ë§Œë“¤ì–´ì¤Œ
- `sigaddset(&newmask, SIGQUIT);` :
    - signalì„ setì— ë”í•´ì£¼ëŠ” í•¨ìˆ˜
    - newmaskë¼ëŠ” sigsetì— SIGQUITë¼ëŠ” ì‹œê·¸ë„ì„ ë”í•´ì¤Œ
- `if (sigprocmask(SIG_BLOCK, &newmask, &oldmask) < 0)` :
    - newmaskì— ìˆëŠ” ì‹œê·¸ë„ì„ ë°œìƒí•´ë„ ë¸”ë¡ì‹œì¼œ, ì¦‰ ë¬´ì‹œí•˜ë¼ëŠ” ëœ»
    - oldmaskëŠ” ì´ì „ì—ë„ ë¸”ë¡í•  ì‹œê·¸ë„ë“¤ì´ ìˆì—ˆì„ ìˆ˜ë„ ìˆìŒ, ì´ì „ì— ìˆë˜ ë¸”ë¡ ë¦¬ìŠ¤íŠ¸ë“¤ì„ oldmaskì—ë‹¤ê°€ ì €ì¥í•´ë†“ëŠ” ê²ƒ, ë³µì›ì´ í•„ìš”í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—

- `if (sigpending(&pendmask) < 0)` : ì§€ê¸ˆ ë¸”ë¡ ë¦¬ìŠ¤íŠ¸ì— ë­ê°€ ìˆëŠ”ì§€,
    - ì¸ìë¡œ ë“¤ì–´ìˆëŠ” pendmaskì—ë‹¤ê°€ ì§€ê¸ˆ ë¸”ë¡ëœ ì‹œê·¸ë„ì„ ë„£ì–´ì¤Œ
- `if (sigismember(&pendmask, SIGQUIT))` : ì²«ë²ˆì§¸ ì¸ìë¡œ ë“¤ì–´ê°„ pendmaskì— SIGQUITê°€ ìˆëŠëƒë¥¼ ë¬¼ì–´ë³´ëŠ” ê²ƒ

â†’ sigpendingê³¼ sigismemberëŠ” ê·¸ëƒ¥ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ë“¤, êµ³ì´ ì—†ì–´ë„ ë¨

*(ì—¬ê¸°ê¹Œì§€ SIGQUIT ë¸”ë¡í•˜ëŠ” ì½”ë“œ)*

---

- `if (sigprocmask(SIG_SETMASK, &oldmask, NULL) < 0)` : ì›ë˜ block listë¡œ ì›ë³µ

<br>

## *sigaction* Function


```c
#include <signal.h>
int sigaction(int signo, const struct sigaction *act, struct sigaction *oact);

struct sigaction {
Â  void Â  (*sa_handler)(int); /* addr of signal handler, */
Â  Â Â Â Â Â Â Â Â Â Â  /* or SIG_IGN, or SIG_DFL */
Â  sigset_t sa_mask;Â  Â Â Â Â Â Â  /* additional signals to block */
Â  int Â  sa_flags;Â  Â Â Â Â Â Â  /* signal options */

Â Â Â Â  /* alternate handler */
Â  voidÂ  (*sa_sigaction)(int, siginfo_t *, void *);
}
```

```c
/* Reliable version of signal(), using POSIX sigaction().Â  */
Sigfunc *
signal(int signo, Sigfunc *func)
{
			Â  struct sigactionÂ  act, oact;

			Â  act.sa_handler = func;
			Â  sigemptyset(&act.sa_mask);
			Â  act.sa_flags = 0;
			Â  if (signo == SIGALRM) {
#ifdefÂ  SA_INTERRUPT
						Â  act.sa_flags |= SA_INTERRUPT;
#endif
			Â  } else {
#ifdefÂ  SA_RESTART
						Â  act.sa_flags |= SA_RESTART;
#endif
			Â  }
			Â  if (sigaction(signo, &act, &oact) < 0)
						Â  return(SIG_ERR);
			Â  return(oact.sa_handler);
}
```

- ì‹œê·¸ì•¡ì…˜ì´ë¼ëŠ” êµ¬ì¡°ì²´ë¥¼ í†µí•´ì„œ ì‹œê·¸ì•ŒëŒì´ ë°œìƒí•  ê²½ìš°, ì¸í„°ëŸ½íŠ¸ë¥¼ ê±¸ë ¤ë©´ ì–´ë–»ê²Œ ì½”ë“œë¥¼ ì§œì•¼í•˜ëŠ”ê°€.
- `if (signo == SIGALRM)` : sig numberê°€ SIGALRMì´ë©´
- `SA_INTERRUPT`, sigaction interrupt ê±¸ì–´ì¤˜ë¼
